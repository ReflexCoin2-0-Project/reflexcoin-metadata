<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>RFX2 Community Spin</title>
<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,#0d1325,#050814);
  color:#fff;
}
.container{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:24px;
  padding:40px;
}
.card{
  background:linear-gradient(180deg,#0f1a33,#0a1024);
  border-radius:20px;
  padding:28px;
}
.left h1{
  color:#f5c400;
  margin-bottom:12px;
}
.left ul{padding-left:18px;}
.left li{margin-bottom:8px;}
.wheel-wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
}
canvas{background:transparent;}
button{
  margin-top:16px;
  padding:12px 22px;
  border:none;
  border-radius:999px;
  background:#f5c400;
  font-weight:bold;
  cursor:pointer;
}
input{
  margin-top:12px;
  padding:10px;
  width:100%;
  border-radius:999px;
  border:none;
}
.right{
  background:#fff;
  color:#000;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
.right img{width:180px;margin-bottom:16px;}
.right p{color:#b99700;font-weight:bold;text-align:center;}
.result{margin-top:10px;}
.actions{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;}
</style>
</head>
<body>
<div class="container">

<div class="card left">
<h1>üé° RFX2 Community Spin</h1>
<p>This is a community-driven experiment built around emotion, participation and on-chain culture.</p>
<ul>
<li>‚è± 1 spin every 6 hours</li>
<li>üíé Airdrop slice = real reward (5%)</li>
<li>üîê Wallet required for real eligibility</li>
</ul>
<p>No payments. No guarantees. Experimental only.</p>
</div>

<div class="card wheel-wrap">
<canvas id="wheel" width="320" height="320"></canvas>
<button onclick="spin()">Spin</button>
<div class="result" id="result">Result: ‚Äî</div>
<input id="wallet" placeholder="Solana wallet (optional)" />
<div class="actions">
<button onclick="connectPhantom()">Connect Phantom</button>
<button onclick="shareWin()">Share your win on X</button>
</div>
</div>

<div class="card right">
<img src="logo-rfx2.png" />
<p>Hold your airdrops.<br>Accumulate. Support RFX2.</p>
</div>

</div>

<script>
const canvas=document.getElementById('wheel');
const ctx=canvas.getContext('2d');
const slices=[
  {label:'üî•',type:'emotion'},
  {label:'‚ù§Ô∏è',type:'emotion'},
  {label:'üòä',type:'emotion'},
  {label:'üò°',type:'emotion'},
  {label:'‚≠ê',type:'emotion'},
  {label:'üíé',type:'airdrop'}
];
const probs=[25,25,25,20,0,5]; // total 100
let angle=0;

function drawWheel(){
  const r=160;
  const sliceAngle=2*Math.PI/slices.length;
  ctx.clearRect(0,0,320,320);
  slices.forEach((s,i)=>{
    ctx.beginPath();
    ctx.moveTo(160,160);
    ctx.fillStyle=i%2?'#6f4bd8':'#5632b5';
    ctx.arc(160,160,r,i*sliceAngle,(i+1)*sliceAngle);
    ctx.fill();
    ctx.save();
    ctx.translate(160,160);
    ctx.rotate(i*sliceAngle+sliceAngle/2);
    ctx.textAlign='center';
    ctx.font='28px serif';
    ctx.fillStyle='#fff';
    ctx.fillText(s.label,r*0.6,10);
    ctx.restore();
  });
  ctx.beginPath();
  ctx.arc(160,160,r,0,2*Math.PI);
  ctx.strokeStyle='#f5c400';
  ctx.lineWidth=8;
  ctx.stroke();
}

drawWheel();

function weightedPick(){
  let r=Math.random()*100,sum=0;
  for(let i=0;i<probs.length;i++){
    sum+=probs[i];
    if(r<=sum) return i;
  }
  return 0;
}

function spin(){
  const pick=weightedPick();
  const sliceAngle=360/slices.length;
  const spins=5;
  const target=spins*360+(pick*sliceAngle)+(sliceAngle/2);
  let start=angle;
  let end=target;
  let startTime=null;
  function animate(t){
    if(!startTime) startTime=t;
    let p=(t-startTime)/2000;
    if(p>1) p=1;
    angle=start+(end-start)*(1-Math.pow(1-p,3));
    canvas.style.transform=`rotate(${angle}deg)`;
    if(p<1) requestAnimationFrame(animate);
    else finish(pick);
  }
  requestAnimationFrame(animate);
}

function finish(i){
  const res=slices[i];
  document.getElementById('result').innerText=
    res.type==='airdrop'
    ? 'Result: üíé Airdrop candidate'
    : 'Result: '+res.label+' emotion';
}

function connectPhantom(){
  alert('Phantom integration ready for backend phase');
}

function shareWin(){
  const text=encodeURIComponent('I just played the RFX2 Community Spin üé°');
  window.open('https://twitter.com/intent/tweet?text='+text,'_blank');
}
</script>
</body>
</html>
