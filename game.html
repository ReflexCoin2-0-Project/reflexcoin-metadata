<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RFX2 Community Spin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Inter,Arial,sans-serif;
  background:radial-gradient(circle at top,#0c1426,#060b18);
  color:#fff;
}
.container{
  max-width:1200px;
  margin:auto;
  padding:40px;
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:30px;
}
.card{
  background:linear-gradient(180deg,#0f1a33,#0a1226);
  border-radius:20px;
  padding:30px;
}
h1,h2{color:#f5c400;margin-top:0}
ul{padding-left:20px}

.logo-box{
  background:#fff;
  border-radius:20px;
  padding:30px;
  text-align:center;
}
.logo-box img{max-width:180px}
.logo-box p{color:#c9a300;font-weight:600}

.center{text-align:center}

#wheel{
  width:320px;
  height:320px;
  border-radius:50%;
  margin:20px auto;
  position:relative;
  border:8px solid #f5c400;
  background:conic-gradient(
    #6d4bd3 0deg 51.4deg,
    #0e1a33 51.4deg 102.8deg,
    #6d4bd3 102.8deg 154.2deg,
    #0e1a33 154.2deg 205.6deg,
    #6d4bd3 205.6deg 257deg,
    #0e1a33 257deg 308.4deg,
    #6d4bd3 308.4deg 360deg
  );
}
.pointer{
  width:0;height:0;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-bottom:20px solid #4fc3ff;
  margin:auto;
}
.emoji{
  position:absolute;
  font-size:28px;
  transform:translate(-50%,-50%);
}
button{
  background:#f5c400;
  border:none;
  padding:12px 24px;
  border-radius:20px;
  font-weight:700;
  cursor:pointer;
}
button:disabled{opacity:.5;cursor:not-allowed}
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-bottom:10px;
}
.admin{
  background:#111;
  border:1px solid #333;
  margin:30px;
  padding:20px;
  border-radius:12px;
}
a{color:#4fc3ff}
</style>
</head>

<body>

<div class="container">

<!-- LEFT -->
<div class="card">
<h1>üé° RFX2 Community Spin</h1>
<p>This is a community-driven experiment built around participation, emotion and attention.</p>
<ul>
<li>‚è±Ô∏è 1 spin every <strong>6 hours</strong></li>
<li>üíé Airdrop slice = real reward</li>
<li>üîê Wallet required for real eligibility</li>
</ul>
<p><small>No payments. No guarantees. Experimental only.</small></p>
</div>

<!-- CENTER -->
<div class="card center">
<div class="pointer"></div>
<div id="wheel"></div>

<button id="spinBtn">Spin</button>
<p id="result"></p>

<input id="wallet" placeholder="Solana wallet (optional)">
<button onclick="connectPhantom()">Connect Phantom</button>

<div id="share"></div>
</div>

<!-- RIGHT -->
<div class="card logo-box">
<img src="logo-rfx2.png">
<p>Hold your airdrops. Accumulate. Support RFX2.</p>
</div>

</div>

<script>
const EMOJIS=[
  {e:"üòä",p:15.83},
  {e:"üò°",p:15.83},
  {e:"üî•",p:15.83},
  {e:"‚ù§Ô∏è",p:15.83},
  {e:"‚≠ê",p:15.83},
  {e:"‚ùå",p:15.83},
  {e:"üíé",p:5}
];

const COOLDOWN = 21600000; // 6 hours

const wheel=document.getElementById("wheel");
const result=document.getElementById("result");
const btn=document.getElementById("spinBtn");
const share=document.getElementById("share");
const wallet=document.getElementById("wallet");

let lastSpin=parseInt(localStorage.getItem("lastSpin")||0);

function placeEmojis(){
  const r=135;
  EMOJIS.forEach((o,i)=>{
    const angle=(360/EMOJIS.length)*i+360/EMOJIS.length/2;
    const rad=angle*Math.PI/180;
    const x=160+r*Math.cos(rad);
    const y=160+r*Math.sin(rad);
    const d=document.createElement("div");
    d.className="emoji";
    d.textContent=o.e;
    d.style.left=x+"px";
    d.style.top=y+"px";
    wheel.appendChild(d);
  });
}
placeEmojis();

function spin(){
  const now=Date.now();
  if(now-lastSpin<COOLDOWN){
    const wait=Math.ceil((COOLDOWN-(now-lastSpin))/3600000);
    alert("Come back in "+wait+" hour(s)");
    return;
  }

  lastSpin=now;
  localStorage.setItem("lastSpin",now);

  let rnd=Math.random()*100,sum=0,res;
  for(const o of EMOJIS){
    sum+=o.p;
    if(rnd<=sum){res=o;break;}
  }

  const angle=Math.random()*360+1440;
  wheel.style.transition="transform 4s ease-out";
  wheel.style.transform=`rotate(${angle}deg)`;

  setTimeout(()=>{
    result.textContent="Result: "+res.e;
    if(res.e==="üíé"){
      saveWinner();
      share.innerHTML=`<a target="_blank" href="https://twitter.com/intent/tweet?text=I just won an airdrop on RFX2 üéâüíé">Share your win on X</a>`;
    } else {
      share.innerHTML="";
    }
  },4000);
}

btn.onclick=spin;

function saveWinner(){
  const winners=JSON.parse(localStorage.getItem("winners")||"[]");
  winners.push({
    wallet:wallet.value||"anonymous",
    date:new Date().toISOString()
  });
  localStorage.setItem("winners",JSON.stringify(winners));
}

async function connectPhantom(){
  if(window.solana?.isPhantom){
    const r=await solana.connect();
    wallet.value=r.publicKey.toString();
  } else alert("Phantom Wallet not installed");
}

// ADMIN PANEL
if(location.search.includes("admin")){
  const a=document.createElement("div");
  a.className="admin";
  a.innerHTML="<h2>Admin Panel</h2><pre>"+JSON.stringify(JSON.parse(localStorage.getItem('winners')||'[]'),null,2)+"</pre>";
  document.body.appendChild(a);
}
</script>

</body>
</html>
