<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RFX2 Community Spin</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,#0b1220,#05080f);
  color:#fff;
}

.container{
  max-width:1200px;
  margin:auto;
  padding:40px 20px;
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:30px;
}

.card{
  background:linear-gradient(180deg,#0f1b34,#070c18);
  border-radius:18px;
  padding:30px;
}

h1{
  color:#f5c400;
  margin-top:0;
}

ul{
  padding-left:18px;
}

.wheel-card{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.wheel-wrapper{
  position:relative;
  width:360px;
  height:360px;
}

canvas{
  width:360px;
  height:360px;
}

/* ‚úÖ SETA CORRETA */
.pointer{
  position:absolute;
  bottom:-20px;
  left:50%;
  transform:translateX(-50%) rotate(180deg);
  width:0;
  height:0;
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-top:22px solid #4da3ff;
  z-index:10;
}

button{
  margin-top:18px;
  background:#f5c400;
  border:none;
  border-radius:999px;
  padding:12px 26px;
  font-size:15px;
  font-weight:bold;
  cursor:pointer;
}

input{
  margin-top:12px;
  width:90%;
  padding:10px;
  border-radius:999px;
  border:none;
  text-align:center;
}

.logo-card{
  background:#fff;
  color:#c9a227;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.logo-card img{
  width:140px;
}

.logo-card p{
  margin-top:14px;
  text-align:center;
  font-weight:bold;
}

/* MOBILE ‚Äì s√≥ ajustes de centragem */
@media(max-width:900px){
  .container{
    grid-template-columns:1fr;
  }
  .wheel-wrapper{
    margin:auto;
  }
}
</style>
</head>

<body>

<div class="container">

  <!-- ESQUERDA -->
  <div class="card">
    <h1>üé° Giro da Comunidade RFX2</h1>
    <p>Experimento conduzido pela comunidade, baseado em emo√ß√£o e participa√ß√£o.</p>
    <ul>
      <li>‚è± 1 giro a cada 6 horas</li>
      <li>üíé Fatia de airdrop inclu√≠da</li>
      <li>üéØ Probabilidade igual para todos os emojis</li>
    </ul>
  </div>

  <!-- CENTRO -->
  <div class="card wheel-card">

    <div class="wheel-wrapper">
      <div class="pointer"></div>
      <canvas id="wheel" width="360" height="360"></canvas>
    </div>

    <button onclick="spin()">Rodar</button>

    <input type="text" placeholder="Carteira Solana (opcional)">

    <button>Conectar Phantom</button>
    <button>Compartilhar vit√≥ria no X</button>

    <div id="result" style="margin-top:10px;"></div>
  </div>

  <!-- DIREITA -->
  <div class="card logo-card">
    <img src="logo-rfx2.png" alt="RFX2">
    <p>Guarde seus airdrops.<br>Acumule. Apoie o RFX2.</p>
  </div>

</div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const slices = [
  {emoji:"‚ù§Ô∏è"},
  {emoji:"‚≠ê"},
  {emoji:"üíé"},
  {emoji:"üòä"},
  {emoji:"üò°"},
  {emoji:"üî•"}
];

const sliceAngle = (2 * Math.PI) / slices.length;
let rotation = 0;
let spinning = false;

function drawWheel(){
  ctx.clearRect(0,0,360,360);

  slices.forEach((slice,i)=>{
    const angle = rotation + i * sliceAngle;

    ctx.beginPath();
    ctx.moveTo(180,180);
    ctx.arc(180,180,170,angle,angle+sliceAngle);
    ctx.closePath();

    ctx.fillStyle = i % 2 === 0 ? "#6d4bd4" : "#5b3fc4";
    ctx.fill();
    ctx.strokeStyle = "#f5c400";
    ctx.lineWidth = 3;
    ctx.stroke();

    // emoji centrado
    ctx.save();
    ctx.translate(180,180);
    ctx.rotate(angle + sliceAngle/2);
    ctx.textAlign="center";
    ctx.font="26px Arial";
    ctx.fillStyle="#fff";
    ctx.fillText(slice.emoji,100,10);
    ctx.restore();
  });
}

drawWheel();

function spin(){
  if(spinning) return;
  spinning = true;

  const spins = Math.random()*5 + 5;
  const targetRotation = rotation + spins * 2 * Math.PI;

  const start = performance.now();
  const duration = 4000;

  function animate(time){
    const progress = Math.min((time-start)/duration,1);
    const ease = 1 - Math.pow(1-progress,3);
    rotation = rotation + (targetRotation - rotation) * ease;
    drawWheel();

    if(progress < 1){
      requestAnimationFrame(animate);
    }else{
      rotation = targetRotation % (2*Math.PI);
      spinning = false;
      showResult();
    }
  }
  requestAnimationFrame(animate);
}

function showResult(){
  const normalized = (2*Math.PI - rotation + Math.PI/2) % (2*Math.PI);
  const index = Math.floor(normalized / sliceAngle);
  document.getElementById("result").innerText =
    "Resultado: " + slices[index].emoji;
}
</script>

</body>
</html>
