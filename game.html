<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RFX2 Community Spin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>

<style>
/* === BASE === */
*{box-sizing:border-box;margin:0;padding:0}
body{
  background:#050914;
  font-family:Inter,Arial,sans-serif;
  color:#e6e9f0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.container{
  width:1200px;
  max-width:96%;
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:24px;
}

/* === PANELS === */
.panel{
  background:#0b1222;
  border-radius:22px;
  padding:24px;
}
h1,h2{color:#f5c400;margin-bottom:12px}
p,li{font-size:14px;line-height:1.6;color:#cfd5f0}

/* LEFT */
.notice{font-size:12px;color:#9aa4c7;margin-top:12px}

/* CENTER */
.center{text-align:center}
input{
  width:100%;padding:10px;border-radius:10px;border:0;margin-bottom:8px
}
button{
  background:#f5c400;border:0;border-radius:999px;
  padding:10px 18px;font-weight:700;cursor:pointer;margin:6px
}
#wheel-wrap{position:relative;width:260px;height:260px;margin:20px auto}
#wheel{
  width:100%;height:100%;border-radius:50%;
  border:8px solid #f5c400;
  background:conic-gradient(
    #6b3fd6 0deg 60deg,#141c33 60deg 120deg,
    #6b3fd6 120deg 180deg,#141c33 180deg 240deg,
    #6b3fd6 240deg 300deg,#141c33 300deg 360deg
  );
  transition:transform 4s cubic-bezier(.17,.67,.2,1);
}
.pointer{position:absolute;top:-16px;left:50%;transform:translateX(-50%);font-size:28px}
.emoji{position:absolute;font-size:26px}
.e1{top:20px;left:50%;transform:translateX(-50%)}
.e2{top:75px;right:25px}
.e3{bottom:55px;right:60px}
.e4{bottom:55px;left:60px}
.e5{top:75px;left:25px}
.e6{top:120px;left:50%;transform:translateX(-50%)}

/* RIGHT */
.logo-box{
  background:#fff;border-radius:18px;padding:18px;text-align:center
}
.logo-box img{width:150px;margin-bottom:10px}
.logo-box p{color:#b08d00;font-size:13px;font-weight:600}

/* ADMIN */
#admin{display:none;margin-top:20px}
.admin-box{
  background:#141c33;border-radius:14px;padding:12px;font-size:13px
}
.admin-box pre{
  background:#050914;padding:8px;border-radius:8px;max-height:160px;overflow:auto
}

@media(max-width:1000px){
  .container{grid-template-columns:1fr}
}
</style>
</head>

<body>

<div class="container">

<!-- LEFT -->
<div class="panel">
<h1>ğŸ¡ RFX2 Community Spin</h1>
<p>Community-driven experiment built around emotion and attention.</p>
<ul>
<li>One spin every 24 hours</li>
<li>ğŸ’ Rare real airdrops</li>
<li>Wallet required for real rewards</li>
</ul>
<div class="notice">
No payment. No guarantees. Experimental only.
</div>
</div>

<!-- CENTER -->
<div class="panel center">
<button onclick="connectPhantom()">ğŸ”— Connect Phantom</button>
<div id="walletStatus"></div>

<div id="wheel-wrap">
<div class="pointer">â¬‡ï¸</div>
<div id="wheel">
  <div class="emoji e1">ğŸ˜Š</div>
  <div class="emoji e2">ğŸ˜¡</div>
  <div class="emoji e3">ğŸ”¥</div>
  <div class="emoji e4">â¤ï¸</div>
  <div class="emoji e5">âŒ</div>
  <div class="emoji e6">ğŸ’</div>
</div>
</div>

<button onclick="spin()">Spin</button>
<button onclick="share()">Share on X</button>

<div id="result"></div>
<div id="stats"></div>

<!-- ADMIN -->
<div id="admin">
<h2>Admin Panel</h2>
<div class="admin-box">
<button onclick="exportCSV()">Export CSV</button>
<button onclick="clearData()">Clear Data</button>
<pre id="adminData"></pre>
</div>
</div>

</div>

<!-- RIGHT -->
<div class="panel">
<div class="logo-box">
<img src="logo-rfx2.png">
<p>Save airdrops. Accumulate. Support RFX2.</p>
</div>
</div>

</div>

<script>
let wallet=null;
const ADMIN_PASS="rfx2admin";

/* === PHANTOM === */
async function connectPhantom(){
 if(!window.solana||!window.solana.isPhantom){
  alert("Phantom not found");
  return;
 }
 const res=await window.solana.connect();
 wallet=res.publicKey.toString();
 document.getElementById("walletStatus").innerText="Connected: "+wallet;
}

/* === GAME === */
const segments=[
 {label:"ğŸ˜Š +1",chance:22},
 {label:"ğŸ˜¡ +1",chance:20},
 {label:"ğŸ”¥ +2",chance:15},
 {label:"â¤ï¸ +3",chance:10},
 {label:"âŒ",chance:30},
 {label:"ğŸ’ AIRDROP",chance:3}
];

function spin(){
 let roll=Math.random()*100,acc=0,idx=0;
 for(let i=0;i<segments.length;i++){
  acc+=segments[i].chance;
  if(roll<=acc){idx=i;break;}
 }
 const angle=360*4+(360-(idx*60)-30);
 wheel.style.transform=`rotate(${angle}deg)`;

 setTimeout(()=>{
  let msg=segments[idx].label;
  if(msg.includes("AIRDROP")&&wallet){
   let data=JSON.parse(localStorage.getItem("airdrops")||"[]");
   data.push({wallet,time:new Date().toISOString()});
   localStorage.setItem("airdrops",JSON.stringify(data));
  }
  document.getElementById("result").innerText=msg;
  updateStats();
 },4200);
}

function updateStats(){
 const spins=+localStorage.getItem("spins")||0;
 localStorage.setItem("spins",spins+1);
 const airdrops=JSON.parse(localStorage.getItem("airdrops")||"[]").length;
 document.getElementById("stats").innerText=
  `Spins: ${spins+1} | Airdrops: ${airdrops}`;
}

/* === ADMIN === */
function admin(){
 const p=prompt("Admin password");
 if(p===ADMIN_PASS){
  admin.style.display="block";
  adminData.innerText=localStorage.getItem("airdrops");
 }
}

function exportCSV(){
 const data=JSON.parse(localStorage.getItem("airdrops")||"[]");
 let csv="wallet,time\n"+data.map(d=>`${d.wallet},${d.time}`).join("\n");
 const a=document.createElement("a");
 a.href=URL.createObjectURL(new Blob([csv]));
 a.download="airdrops.csv";
 a.click();
}

function clearData(){
 if(confirm("Clear all data?")){
  localStorage.clear();location.reload();
 }
}

/* === SHARE === */
function share(){
 const t=encodeURIComponent(
 "I just played the RFX2 Community Spin ğŸ¡ Join ğŸ‘‰ https://reflexcoin2-0-project.github.io/reflexcoin-metadata/"
 );
 window.open("https://twitter.com/intent/tweet?text="+t,"_blank");
}

document.addEventListener("keydown",e=>{
 if(e.key==="A")admin();
});
</script>

</body>
</html>
